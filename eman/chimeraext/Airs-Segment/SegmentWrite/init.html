<html>
<head>
<title>Segment Volume - Segment Write</title>
<style type="text/css">
<!-- 
body 				{ width: 640px; margin: auto; padding: 24px;
							font: Verdana, Arial, Helvetica, sans-serif; }
p 					{	text-align: justify; padding-left: 16px; }
.highlight 	{ color: #006699; }
.code 			{ color: #666666; }
-->
</style>
</head>

<body>
<h2>Segment Write</h2>

<img src="segmentwrite.gif">  <!-- icon -->

<h3>Introduction</h3>

<p>The <span class="highlight">Segment Write</span> module is available 
as a part of <a href="../SegmentHelp/index.html">Segment Volume</a> package. The 
module is a <span class="highlight">Chimera</span> extension module. 
To use this module, the <span class="highlight">Segment Menu</span> 
module of the <span class="highlight">Segment Volume</span> package 
is required. You will need the 
<a href="http://www.cgl.ucsf.edu/chimera/">Chimera</a> software 
package to use this module. The module interacts with 
<span class="highlight">Volume Viewer</span>, a Chimera module for 
visualizing 3D volume data.</p>

<p><span class="highlight">Segment Write</span> uses Chimera's 
<span class="highlight">VolumeData</span> data objects (see 
<span class="highlight">Volume Data</span> module in Chimera) and 
saves the data in different file formats. </p>

<p>The <span class="highlight">Segment Read</span> module in the 
<span class="highlight">Segment Volume</span> package can read data in 
additional data formats such as the RawIV file format, and can be 
used to save those data format files using the 
<span class="highlight">Segment Write</span> module.  </p>

<p><b>Note:</b> This version of the Segment Volume package is
a pre-release version.</p>

<h3>More:</h3>

<ul>
	<li><a href="#startup">Startup</a>
		<ul>
			<li><a href="#list">Listing the module</a>
			<li><a href="#start">Starting the module</a></li>
		</ul>
	</li>
	<li><a href="#formats">Supported input data formats</a>
		<ul>
			<li><a href="#chimeraformats">Chimera's data formats</a></li>
			<li><a href="#segreadformats">Segment Read supported data formats</a></li>
		</ul>
	</li>
	<li><a href="#outformats">Supported output data formats</a>
		<ul>
			<li><a href="#mrcformat">MRC format</a></li>
		</ul>
	</li>
	<li><a href="#dialog">Dialog panel</a>
		<ul>
			<li><a href="#input">Input data section</a>
			<li><a href="#save">Save format section</a></li>
			<li><a href="#output">Output data section</a></li>
			<li><a href="#buttons">Other buttons</a></li>
		</ul>
	</li>
	<li><a href="#command">Command line options</a> (for advanced users)
		<ul>
			<li><a href="#grid">Save a VolumeData grid object of volume data</a></li>
			<li><a href="#matrix">Save a 3D matrix of volume data</a></li>
		</ul>
	</li>
	<li><a href="#notes">Notes</a>
		<ul>
			<li><a href="#noteformats">Output data formats</a></li>
		</ul>
	</li>	
</ul>

<hr>

<a name="startup"></a>
<h3>Startup</h3>

<a name="list"></a>
<h4>Listing the module</h4>

<p>The module files are stored in the directory 
<span class="highlight">SegmentWrite</span>. To list the module under 
Chimera's <span class="highlight">Tools</span> menu, add the directory 
-&nbsp;containing&nbsp;- the <span class="highlight">SegmentWrite</span> 
directory to Chimera's list of Tools.</p>

<p>To do so, open Chimera's main window, choose 
<span class="highlight">Perferences</span> under 
<span class="highlight">Favorites</span> menu, then choose the 
<span class="highlight">Tools</span> category and then 
<span class="highlight">Add</span> the directory -&nbsp;containing&nbsp;- 
the <span class="highlight">SegmentWrite</span> directory. This will 
list the tool under <span class="highlight">AIRS</span> on the 
<span class="highlight">Tools</span> menu.</p>

<a name="start"></a>
<h4>Starting the module</h4>

<p>To start the module from the Chimera menu, first you will need to ensure 
that the module is <a href="#list">listed</a> under Chimera's 
<span class="highlight">Tools</span> menu. Then, click on 
<span class="highlight">Segment Write</span> in the 
<span class="highlight">AIRS</span> menu, under Chimera's 
<span class="highlight">Tools</span> menu.</p>

<p>Alternatively, you can use the command line tool in Chimera's 
<span class="highlight">IDLE</span> tool (under Programming tools 
on the Tools menu), and type: </p>

<p>
<span class="code">
&nbsp;&nbsp;&gt;&gt;&gt; import SegmentWrite <br>
&nbsp;&nbsp;&gt;&gt;&gt; SegmentWrite.show_seg_write_dialog() 
</span>
</p> 

<hr>

<a name="formats"></a>
<h3>Supported input data formats</h3>

<a name="chimeraformats"></a>
<h4>Chimera's data formats</h4>

<p>The <span class="highlight">Segment Write</span> module currently supports 
all of Chimera's <span class="highlight">VolumeData</span> data types, 
handled by the <span class="highlight">Volume Data</span> module of Chimera.</p>

<a name="segreadformats"></a>
<h4>Segment Read supported data formats</h4>

<p>Additionally, the <span class="highlight">Segment Read</span> module 
(available with the <span class="highlight">Segment Volume</span> package) 
can be used to enable Chimera to read additional data foramts. </p>

<hr>

<a name="outformats"></a>
<h3>Supported output data formats</h3>

<a name="mrcformat"></a>
<h4>MRC data formats</h4>

<p>The <span class="highlight">Segment Write</span> can write data in MRC format. 
The MRC format specifications and our implementation of the specifications are 
listed in <a href="mrc_specs.py">mrc_specs.py</a>.
</p>

<hr>

<a name="dialog"></a>
<h3>Dialog panel</h3>

<p><img src="init.png" align="right" 
style="margin-left:16px; margin-bottom:8px;"> </p>

<a name="input"></a>
<h4>Input data section</h4>

<p>The Segment Write dialog panel has three main sections. The first section 
is the Input data section. The <span class="highlight">Data file menu</span> 
automatically lists available data regions in Chimera's 
<span class="highlight">Volume Viewer</span>. To select a data set, 
simply pick an entry from this menu. The size of the data set in pixels 
is automatically displayed on the dialog, below the menu. If the data set 
is displayed in Chimera, then the <span class="highlight">Displayed</span> 
value is set to <span class="highlight">Yes</span>.</p>

<p>To open new models, click the <span class="highlight">Open</span> 
button below the menu. This will open Chimera's 
<span class="highlight">Volume Viewer</span> dialog and an 
<span class="highlight">Open file browser</span> dialog. After adding 
the models, if the models are not listed on the data menu, click the 
<span class="highlight">Refresh menu</span> button, next to the 
<span class="highlight">Open button</span> on the 
<span class="highlight">Segment Write</span> dialog.</p>

<p>Alternatively, you can directly open new models using Chimera's 
<span class="highlight">Volume Viewer</span>. Once again, if the newly 
opened models are not displayed on the data menu, hit the 
<span class="highlight">Refresh menu</span> button.</p>

<p>If the <a href="../SegmentRead/init.html">Segment Read</a> module of the 
<span class="highlight">Segment Volume</span> package is available, 
it can be used to read additional data formats not supported by Chimera.</p>

<a name="save"></a>
<h4>Save/Output format section</h4>

<p>Pick the output data format, and go to that row (currently, only 
the MRC data format is supported). Enter the output file name 
in the <span class="highlight">output entry box</span> and click on 
<span class="highlight">Save</span> button. This will save the output 
file in the current Chimera directory (usually the directory from 
which Chimera was started). </p>

<p>Alternatively, you can click on the 
<span class="highlight">Save As</span> button and specify the output 
file name and output file directory.</p>

<a name="output"></a>
<h4>Output data section</h4>

<p>The output data section has an 
<span class="highlight">Output data menu</span> that lists the 
current saved output files. To open or display the file in Chimera, 
click on the <span class="highlight">Show</span> button. If more 
than one output file was created, then you can click on 
<span class="highlight">Show All</span> button to open and display 
all the files on the menu. </p>

<p>The <span class="highlight">Hide</span> button closes the model 
(associated with the file on the 
<span class="highlight">Output data menu</span>) in Chimera, but 
leaves the entry on the <span class="highlight">Volume Viewer</span> 
data menu unchanged. The <span class="highlight">Hide All</span> 
button applies the <span class="highlight">Hide</span> button to all 
the files on the output data menu.</p>

<p>The <span class="highlight">Remove All</span> button removes all the 
entries on the <span class="highlight">Output data menu</span>, but 
leaves the corresponding entries (if any) on the 
<span class="highlight">Volume Viewer</span> data menu unchanged.</p>

<a name="buttons"></a>
<h4>Other buttons</h4>

<p>The <span class="highlight">Close</span> button closes the 
<span class="highlight">Segment Write</span> dialog. The 
<span class="highlight">Help</span> button opens this help page.</p>

<hr>

<a name="command"></a>
<h3>Command line options (for advanced users)</h3>

<p>The command line options can be used in Chimera's 
<span class="highlight">IDLE</span> tool (under Programming tools 
on the Tools menu).</p>

<a name="grid"></a>
<h4>Save a VolumeData grid object of volume data (for advanced users)</h4>

<p>Volume data in Chimera is handled by the 
<span class="highlight">Volume Data</span> module in Chimera, 
and is represented as a grid object. To save a grid object 
in the different supported formats, simply type:</p>

<p>
<span class="code">
&nbsp;&nbsp;&gt;&gt;&gt; import SegmentWrite
</span><br>

<span class="code">
&nbsp;&nbsp;&gt;&gt;&gt; SegmentWrite.mrc_write.save_mrc(grid_object, path) 
</span>

<span class="highlight"># MRC data format</span>

</p>

<p>For further help, type:<br>
<span class="code">
&gt;&gt;&gt;&nbsp;help(SegmentWrite.mrc_write.save_mrc)
</span>
<span class="highlight"># MRC data format</span>
</p>

<a name="matrix"></a>
<h4>Save a 3D matrix of volume data (for advanced users)</h4>

<p>Volume data in Chimera is handled by the 
<span class="highlight">Volume Data</span> module in Chimera, and is 
represented as a grid object. The grid object essentially contains 
the header info. You can therefore, read a volume data file, make 
modifications to its pixel values in the data matrix, and save the 
modified data matrix along with the original 
<span class="highlight">header</span> (grid_object) in the different
supported formats. To do so, simply type:</p>

<p>
<span class="code">
&nbsp;&nbsp;&gt;&gt;&gt; import SegmentWrite
</span><br>
<span class="code">
&nbsp;&nbsp;&gt;&gt;&gt; SegmentWrite.mrc_write.save_mrc_matrix(grid_object, 
path, matrix)
</span>
<span class="highlight"># MRC data format</span>
</p>

<p>For further help, type:</p>

<p>
<span class="code">
&nbsp;&nbsp;&gt;&gt;&gt; help(SegmentWrite.mrc_write.save_mrc_matrix)
</span>
<span class="highlight"># MRC data format</span>
</p>

<hr>

<a name="notes"></a>
<h3>Notes</h3>

<a name="noteformats"></a>
<h4>Output data formats</h4>
<p>Currently, only the MRC output data format is supported. </p>

<hr>

<span class="highlight">
<i>Segment Volume package (pre-release) - Segment Write module<br>
2005 April, Lavu Sridhar, Baylor College of Medicine</i>
</span>

</body>

</html>