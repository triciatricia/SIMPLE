<html>
<head>
<title>Segment Volume - Track Transform</title>
<style type="text/css">
<!-- 
body 				{ width: 640px; margin: auto; padding: 24px;
							font: Verdana, Arial, Helvetica, sans-serif; }
p 					{	text-align: justify; padding-left: 16px; }
.highlight 	{ color: #006699; }
.code 			{ color: #666666; }
-->
</style>
</head>

<body>
<h2>Track Transform</h2>

<img src="trackxform.gif"> <!-- icon -->

<h3>Introduction</h3>

<p>The <span class="highlight">Track Transform</span> module
is available as a part of the 
<a href="../SegmentHelp/index.html">Segment Volume</a> package. The module 
is a <span class="highlight">Chimera</span> extension module. 
You will need the 
<a href="http://www.cgl.ucsf.edu/chimera/">Chimera</a> software 
package to use this module.</p>

<p>The module helps track 3D transformation (3D translation and 
3D rotation) of a model displayed in Chimera (in terms of the 
camera coordinates). It can record a starting orientation and 
position of a model, and then set the orientation and position 
of another or the same model to that of the recorded 
transformation.</p>

<p><b>Note:</b> This version of the Segment Volume package is
a pre-release version.</p>

<h3>More:</h3>

<ul>
	<li><a href="#startup">Startup</a>
		<ul>
			<li><a href="#list">Listing the module</a></li>
			<li><a href="#start">Starting the module</a></li>
		</ul>
	</li>
	<li><a href="#dialog">Dialog</a>
		<ul>
			<li><a href="#menu">Model menu</a></li>
			<li><a href="#record">Record the transform</a></li>
			<li><a href="#current">Current transform</a></li>
			<li><a href="#apply">Apply the transform</a></li>
			<li><a href="#other">Other buttons</a></li>
		</ul>
	</li>
	<li><a href="#example">Example</a></li>
	<li><a href="#command">Command line options</a> (for advanced users)
		<ul>
			<li><a href="#commandget">Get transform of a model</a></li>
			<li><a href="#commandapply">Apply a transform to a model</a></li>
		</ul>
	</li>
	<li><a href="#notes">Notes</a>
		<ul>
			<li><a href="#inactive">Inactive models</a></li>
		</ul>
	</li>
</ul>

<hr>

<a name="startup"></a>
<h3>Startup</h3>

<a name="list"></a>
<h4>Listing the module</h4>

<p>The module files are stored in the directory 
<span class="highlight">SegmentTrack</span>. To list the module under 
Chimera's <span class="highlight">Tools</span> menu, add the directory 
-&nbsp;containing&nbsp;- the <span class="highlight">SegmentTrack</span> 
directory to Chimera's list of Tools.</p>

<p>To do so, open Chimera's main window, choose 
<span class="highlight">Perferences</span> under 
<span class="highlight">Favorites</span> menu, then choose the 
<span class="highlight">Tools</span> category and then 
<span class="highlight">Add</span> the directory -&nbsp;containing&nbsp;- 
the <span class="highlight">SegmentTrack</span> directory. This will 
list the tool under <span class="highlight">AIRS</span> on the 
<span class="highlight">Tools</span> menu.</p>

<a name="start"></a>
<h4>Starting the module</h4>

<p>To start the module from the Chimera menu, first you will need to ensure 
that the module is <a href="#list">listed</a> under Chimera's 
<span class="highlight">Tools</span> menu. Then, click on 
<span class="highlight">Track Transform</span> in the 
<span class="highlight">AIRS</span> menu, under Chimera's 
<span class="highlight">Tools</span> menu.</p>

<p>Alternatively, you can use the command line tool in Chimera's 
<span class="highlight">IDLE</span> tool (under Programming tools 
on the Tools menu), and type: </p>

<p>
<span class="code">
&nbsp;&nbsp;&gt;&gt;&gt; import SegmentTrack<br>
&nbsp;&nbsp;&gt;&gt;&gt; SegmentTrack.trackxform.show_track_xform_dialog() 
</span>
</p> 

<hr>

<a name="dialog"></a>
<h3>Dialog</h3>

<p><img src="trackxform.png" align="right" 
style="margin-left:16px; margin-bottom:8px "></p>

<a name="menu"></a>
<h4>Model menu</h4>

<p>The <span class="highlight">Model menu</span> lists all Chimera 
open models and keeps track of any newly opened or closed models.</p>

<a name="record"></a>
<h4>Record the transform</h4>

<p>To use the module, you will first need to select an open model 
from <span class="highlight">Model menu</span> and record its current 
orientation by pressing the <span class="highlight">Record</span> 
button. The translation axes and the rotation axes and angle 
parameters are recorded and displayed.</p>

<a name="current"></a>
<h4>Current transform</h4>

<p>To get the current transformation of a model, select that model 
from the <span class="highlight">Model menu</span> and press the 
<span class="highlight">Get</span> button.</p>

<a name="apply"></a>
<h4>Apply the transform</h4>

<p>To apply the recorded transform, select the models in 
<span class="highlight">Model List</span> to which you 
want to apply the recorded transform and press the 
<span class="highlight">Apply</span> button. Each of the 
selected models' orientation and center are individually 
set to the recorded transformation parameters. </p>

<a name="other"></a>
<h4>Other buttons</h4>

<p>The <span class="highlight">Reset</span> button simply resets all 
the transform parameters to 0.</p>

<p>The <span class="highlight">Close</span> button closes the dialog, 
and the <span class="highlight">Help</span> button launches this help
page.</p>

<hr>

<a name="example"></a>
<h3>Example</h3>

<p><img src="xformbefore.png" align="left">&nbsp;<img src="xformafter.png" ></p>

<p>In the first figure, we have one model which is broken up into three 
small models. We record the transform of the parent model by selecting the
parent model on the <span class="highlight">Model menu</span>, and hitting
the <span class="highlight">Record</span> button. Then, we pick the child 
and the parent models and move them around in Chimera. The final states 
are shown in the second figure. Now, when we select all the four models 
in the <span class="highlight">Model List</span> box, and hit the 
<span class="highlight">Apply</span> button, then all the models return
to the recorded transform position as shown in the first figure.</p>


<hr>

<a name="command"></a>
<h3>Command-line options (for advanced users)</h3>

<a name="commandget"></a>
<h4>Get a Chimera transform</h4>

<p>To get the transform object of a Chimera model, simply type:<br>
<span class="code">
&nbsp;&nbsp;&gt;&gt;&gt; import SegmentTrack<br>
&nbsp;&nbsp;&gt;&gt;&gt; SegmentTrack.trackxform.get_xform(model)
</span>
</p>

<p>To get help, type:<br>
<span class="code">
&nbsp;&nbsp;&gt;&gt;&gt; help(TrackXform.get_xform)
</span></p>

<a name="commandapply"></a>
<h4>Apply a Chimera transform</h4>

<p>To apply the transform object to a Chimera model, simply type:<br>
<span class="code">
&nbsp;&nbsp;&gt;&gt;&gt; import SegmentTrack<br>
&nbsp;&nbsp;&gt;&gt;&gt; SegmentTrack.trackxform.update_xform(model, xform)
</span>
</p>

<p>To get help, type:<br>
<span class="code">
&nbsp;&nbsp;&gt;&gt;&gt; help(SegmentTrack.trackxform.update_xform)
</span></p>


<hr>

<a name="notes"></a>
<h3>Notes</h3>

<a name="inactive"></a>
<h4>Inactive models</h4>

<p>Even if a model is <span class="highlight">not active</span> 
(see Chimera's <span class="highlight">Model Panel</span>), its 
orientation and center are set to the recorded transformation.</p>

<hr>

<span class="highlight">
<i>Segment Volume package (pre-release) - Segment Track module<br>
2005 April, Lavu Sridhar, Baylor College of Medicine</i>
</span>

</body>

</html>