<HTML><HEAD><TITLE>/home/eman64/EMAN/src/eman/src/foldhunterP.html</TITLE></HEAD><BODY>
<a href=http://ncmi.bcm.tmc.edu/~stevel/EMAN/doc><img src=../EMAN2.logo.png></a><h1>foldhunterP</h1>
<p><h3>This program is used to quantitatively fit a subunit/domain into a large structure density map at intermediate resolution.</h3>
foldhunterP  &lt;map> &lt;model> &lt;outputmap> [cpu=&lt;number of CPU>] [da=&lt;angle>] [startangle=&lt;alt,az,phi>] [range=&lt;angle range>|&lt;r1,r2,r3>] [smart] [mcf] [flcf=&lt;radius>] [sphere_region=&lt;x0,y0,z0,r>] [cyl_region=&lt;x0,y0,z0,rmin,rmax,h>] [keep=&lt;solution_num>] [mask=&lt;x0,y0,z0,r>] [apix=&lt;angstrom_per_pixel>] [res=&lt;angstrom>] [peakwidth=&lt;pixels>] [finestda=&lt;finest angle stepsize>] [int=&lt;file>] [relorig=&lt;x,y,z>] [explorer=&lt;binary file>] [log=&lt;filename>] [bat=&lt;batch file>] [genpdb=&lt;pdb file>] [verbose]


<h3>Parameters:</h3>
<br><table border=3><tr><td>&lt;map></td><td>input file, single 3D map in MRC format, usually the reconstruction map</td></tr>
<tr><td>&lt;model></td><td>input file, single 3D map in MRC format, the probe map e.g. from PDB atomic structure blurred to similar resolution to &lt;map></td></tr>
<tr><td>&lt;outputmap></td><td>the output density map in MRC format, is the rotated and then translated probe map according to the best match parameters</td></tr>
<tr><td>[cpu=&lt;number of CPU>]</td><td>number of processors to use, default to 1</td></tr>
<tr><td>[da=&lt;angle>]</td><td>angular search step size in degree</td></tr>
<tr><td>[startangle=&lt;alt,az,phi>]</td><td>starting angles, search will be around it (+-range/2), in degree</td></tr>
<tr><td>[range=&lt;angle range>|&lt;r1,r2,r3>]</td><td>range of the search will cover, single value will set three ranges the same, or three different ranges could be set, in degree</td></tr>
<tr><td>[smart]</td><td>if smart is set, the search will go deep around the best orientation with finer angular step size until angular step size is smaller than 1 degree or finestda</td></tr>
<tr><td>[mcf]</td><td>use MCF instead the default CCF for correlation function</td></tr>
<tr><td>[flcf=&lt;radius>]</td><td>STILL EXPERIMETAL: use fast local correlation instead the default CCF for correlation function, input radius of the mask</td></tr>
<tr><td>[sphere_region=&lt;x0,y0,z0,r>]</td><td>only consider solutions in given spheric region, in pixel, relative to center of the map</td></tr>
<tr><td>[cyl_region=&lt;x0,y0,z0,rmin,rmax,h>]</td><td>only consider solutions in given cylinder shell region, in pixel, relative to center of the map</td></tr>
<tr><td>[keep=&lt;solution_num>]</td><td>number of the top matches will be outputed, default to 20</td></tr>
<tr><td>[mask=&lt;x0,y0,z0,r>]</td><td>won't consdier solutions inside the masked spheric region, in pixel, relative to center of the map</td></tr>
<tr><td>[apix=&lt;angstrom_per_pixel>]</td><td>Angstrom/voxel, if set, the output for translation will be in Angstrom, otherwise in pixel</td></tr>
<tr><td>[res=&lt;angstrom>]</td><td>the resolution of map, only effective when da is not set and used to calculate the maximal angular step size. default to 8 Angstrom</td></tr>
<tr><td>[peakwidth=&lt;pixels>]</td><td>pixels assumed for each match peak width, to avoid too close peaks being considered, default to 5 pixels</td></tr>
<tr><td>[finestda=&lt;finest angle stepsize>]</td><td>smallest angular step size that 'smart' feature will use,d efault to 1 degree</td></tr>
<tr><td>[int=&lt;file>]</td><td>filename for intermediate data output</td></tr>
<tr><td>[relorig=&lt;x,y,z>]</td><td>the position of the small boxed density(model) in the large map, required for [explorer=&lt; >] option, default to 0,0,0</td></tr>
<tr><td>[explorer=&lt;binary file>]</td><td>output a file to read by an IRIS Explorer module ReadFoldhunter to apply the solutions, only work when [relorig=&lt;x,y,z>] is set</td></tr>
<tr><td>[log=&lt;filename>]</td><td>the file to send the intermediate outputs, if not set, stdout (screen) will be used</td></tr>
<tr><td>[bat=&lt;batch file>]</td><td>output a csh script to transform the probe to match the ref map according to the top solutions</td></tr>
<tr><td>[genpdb=&lt;pdb file>]</td><td>This will generate a new PDB file in the determined orientations</td></tr>
<tr><td>[verbose]</td><td>output the intermediate information and the time spent in the orientation search will be monitored</td></tr>
</table><br><h3>Usage:</h3>
<p>foldhunterP	ref.mrc probe.mrc out.mrc cpu=8 explorer=out.exp relorig=123,234,345 bat=out.bat
<p>foldhunterP	ref.mrc probe.mrc out.mrc da=20 smart
<p>foldhunterP	ref.mrc  probe.mrc  out.mrc  da=1 startangle=35.7,99.3,234.7 range=10.0
<h3>Description</h3>
<P>This program is classified as experimental at this point. Expect
a forthcoming publication with more details. We do not suggest
using it until it has been better characterized.
<P>This program is parellelized using pthreads to run on shared memory computers.
<P>This program tries to find the best matches for a probe density map (such as a known structure
from PDB) to be fitted into the reference map which is usually a lower resolution
reconstruction map by cryoEM, this will hopefully give more information about how the domains
arrangement in the context of large assemblies .
<P>The requirements for the two input maps are that they are cubic, same size, similar resolution.
<P>The methodology is simply cross correlation. The correlation coefficients are used as the
criterion to find the best matches. The final outputs are just simplely the top ranked matches, there
is no intention to build intelligence to determine if the matches are correct. Make sure to
visually inspect the top matches. Experience showed that the correct match needs not
to be the best match.
<P>The program outputs the Euler angles and the translations for all matches, but only actually
transforms and outputs the probe map according to the best match. When viewed together with the
reference map, this output map will overlap the corresponding domain in reference map if the
solution is correct.
<P>There are three ways to check for other matches.
<P>First, one could use the <b>[explorer=< >]</b> option which will output a binary file to be read in
by an IRIS Explorer module developed in <a href="http://ncmi.bcm.tmc.edu">NCMI</a>. This module provides interface for
interactively inspect each of the matchs.
<P>Second, the <b>[bat=<batch file>]</b> option will output a CSH script which would handle the correct transformations
for all the matches. Just run the csh script to get all the transformed probe structures.
<P>Third, one could manually transform to match the equivalent
domain in reference map. Be sure to transform in correct order: <b>rotate first, then translate</b>.
<a href="http://ncmi.bcm.tmc.edu/~stevel/EMAN/doc/progs/proc3d.html"><b>proc3d</b></a>
could be used to do these transforms, but unfortunately <b>proc3d</b> does it in reversed order
(translate first, then rotate), be be sure to <b>transform in two steps</b> instead of one step if
<b>proc3d</b> is used.
<P>More specifically, to transform the model map to match the corresponding part in the reference map:
<P>    1:      rotate the model by the 3 rotation angles
<P>                   e.g.    proc3d model out1 rot=30,60,80
<P>
<P>    2:      translate the output of step 1 by the 3 translations
<P>                   e.g.    proc3d out1 out trans=3,-4,5
<P>Please visit web page <a href="http://ncmi.bcm.tmc.edu/~wjiang/hhfh">Helixhunter and Foldhunter</a>
for more detailed information.
<hr><font size=2>EMAN Manual page, generated Wed Feb 18 10:10:08 2009</font></BODY></HTML>
