<HTML><HEAD><TITLE>/home/eman64/EMAN/src/eman/src/make3d.html</TITLE></HEAD><BODY>
<a href=http://ncmi.bcm.tmc.edu/~stevel/EMAN/doc><img src=../EMAN2.logo.png></a><h1>make3d</h1>
<p><h3>This program builds 3D models from a set of class averages using Fourier techniques</h3>
make3d  &lt;input file> [out=&lt;outfile>] [hard=&lt;maxpr>] [noweight] [lowmem] [sym=&lt;c4,icos,etc>] [pad=&lt;padsize>] [mode=&lt;1-6>] [mask=&lt;rad>] [apix=&lt;num>] [norm] [keep=&lt;sigmamult>] [resmap=&lt;name>] [snrfile=&lt;file>] [logit=&lt;name>] [usecenter] [flipphase] [wiener3d=&lt;sf file>] [iter=&lt;n>] [subset=&lt;i/n>] [goodbad] [log10] [savenorm] [inorm]


<h3>Parameters:</h3>
<br><table border=3><tr><td>&lt;input file></td><td>File containing class averages</td></tr>
<tr><td>[out=&lt;outfile>]</td><td>Output 3D MRC file</td></tr>
<tr><td>[hard=&lt;maxpr>]</td><td>This specifies how well the class averages must match the model to be included, 25 is typical</td></tr>
<tr><td>[noweight]</td><td>Normally the class averages are weighted by the number of raw particles used, this disables that</td></tr>
<tr><td>[lowmem]</td><td>Read in images only when needed instead of preloading all in memory</td></tr>
<tr><td>[sym=&lt;c4,icos,etc>]</td><td>The symmetry to apply to the model </td></tr>
<tr><td>[pad=&lt;padsize>]</td><td>To reduce Fourier artifacts, the model is typically padded by ~25%</td></tr>
<tr><td>[mode=&lt;1-6>]</td><td>Specifies the interpolation size, 2 is the default</td></tr>
<tr><td>[mask=&lt;rad>]</td><td>real-space mask radius</td></tr>
<tr><td>[apix=&lt;num>]</td><td>set the sampling (angstrom/pixel)</td></tr>
<tr><td>[norm]</td><td>This will perform normalization of the volumes between iterations to eliminate problems in cases with poor coverage in Fourier space</td></tr>
<tr><td>[keep=&lt;sigmamult>]</td><td>An alternative to 'hard'</td></tr>
<tr><td>[resmap=&lt;name>]</td><td>Generates a 'resolution map' in another 3D MRC file</td></tr>
<tr><td>[snrfile=&lt;file>]</td><td>Use a SNR file (as generated by classalignall) for proper 3D Wiener filtration</td></tr>
<tr><td>[logit=&lt;name>]</td><td>Log the make3d results to particle.log, with tag &lt;name> (usually iteration number)</td></tr>
<tr><td>[usecenter]</td><td>Will use the center parameter in the image header to center the particle before reconstruction</td></tr>
<tr><td>[flipphase]</td><td>Will flip the phase to correct CTF</td></tr>
<tr><td>[wiener3d=&lt;sf file>]</td><td>Will perform Wiener filter in 3D assuming each image has proper CTF parameters embedded</td></tr>
<tr><td>[iter=&lt;n>]</td><td>Number of iterations, default=4</td></tr>
<tr><td>[subset=&lt;i/n>]</td><td>Which subset to use. default = 0/1</td></tr>
<tr><td>[goodbad]</td><td>Saves the used and unused class averages in 2 files</td></tr>
<tr><td>[log10]</td><td>Averages the log of the projections</td></tr>
<tr><td>[savenorm]</td><td>Saves the normalization map to norm.mrc</td></tr>
<tr><td>[inorm]</td><td>This will use a special weighting scheme to compensate for poor SNR sampling on the unit sphere</td></tr>
</table><br><h3>Usage:</h3>
<p>make3d classes.1.img out=threed.1.mrc hard=25 sym=c4 pad=128 mask=42
<h3>Description</h3>
<P>This program is used to build a 3d model from a set of projections/class
averages. The individual projections must already have assigned euler
angles in their headers. The 3d model building process is iterative. The
iterative loop handles 2 things. First, the relative normalization of
the slices is not initially known. Second, some class averages will
typically be worse than others. Just like when generating class averages
from individual images, the images which are the least consistent with
the overall model will be excluded from the reconstruction. Similar
to classalignall, a sigma multiplier may be specified for discarding
individual class averages, or alternatively, a hard phase error
threshold may be set. Any image with a higher phase error with the
3d model than the threshold will be discarded. Only one of these 2
options, 'keep=<sigmamult>' or 'hard=<max phase error>' should be
specified. The phase error should not be interpreted as a residual.
Typically this value should be between 20 and 30.
<P>'sym=<symmetry>' specifies the symmetry of the 3d model. If nothing is
specified, the model is assumed to have no symmetry. Currently, only
Cn, Dn and icos symmetries are supported.
<P>Reconstructions are performed in Fourier space. This causes certain
artifacts to appear in the 3d model. These artifacts can be reduced
by padding the images in real space. 50% padding produces excellent
results in most cases, ie - an 80x80 image would be padded to 120x120.
This would be specified with 'pad=120'. 25% padding provides adequate
results in most cases. The other artifact is caused by interpolation
in Fourier space. 'make3d' supports 6 levels of interpolation. Type
1 is 'nearest neighbor' interpolation and is very fast, but produces
significant artifacts. The default in most cases is type 2, which 
generally produces the best
all-around results. If you have a very small number of slices, you
might try mode=5. This effect can be observed qualitatively using the 
<a href=v4.html>v4</a> program.
This program allows you to interactively select the interpolation
mode used for generating forward projections of a 3d model. The artifacts
in v4 are more severe, but qualitatively similar to those produced
by Fourier reconstruction.
<P>Finally, since Fourier reconstruction DOES produce some undesirable
artifacts, generally this is just used as a preliminary model. Once
this model has been generated, typically this model will be improved
using a real-space iterative technique. This is implimented in
<a href=make3diter.html>make3diter</a>.
<hr><font size=2>EMAN Manual page, generated Wed Feb 18 10:10:08 2009</font></BODY></HTML>
